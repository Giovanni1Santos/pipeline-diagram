<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pipeline CI/CD DevSecOps</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f7fa;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        #pipeline-diagram {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            overflow: auto;
        }
        .legend {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 25px 0;
        }
        .legend-item {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border-radius: 5px;
            font-weight: 500;
        }
        .phase-ci { background: #2196F3; color: white; }
        .phase-cd { background: #FF9800; color: black; }
        .phase-runtime { background: #F44336; color: white; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Pipeline CI/CD com Segurança Shift-Left</h1>
        
        <div class="legend">
            <div class="legend-item phase-ci">
                <i class="fas fa-code-branch" style="margin-right: 8px;"></i>
                Fase CI - Integração Contínua
            </div>
            <div class="legend-item phase-cd">
                <i class="fas fa-rocket" style="margin-right: 8px;"></i>
                Fase CD - Entrega Contínua
            </div>
            <div class="legend-item phase-runtime">
                <i class="fas fa-shield-alt" style="margin-right: 8px;"></i>
                Runtime - Monitoramento
            </div>
        </div>

        <div id="pipeline-diagram">
            <!-- Diagrama Mermaid -->
            <div class="mermaid">
                flowchart TD
                    A[("fa:fa-code Commit")] --> B[SCM: GitLab/GitHub]
                    B --> C{Trigger Pipeline}
                    
                    subgraph CI [Fase CI - Build e Teste]
                        C --> D[SAST\nSonarQube/Semgrep]
                        D --> E[SCA\nSnyk/OWASP DC]
                        E --> F[IaC Scan\nCheckov/Terrascan]
                        F --> G[Build\nMaven/Gradle/NPM]
                        G --> H[Unit/Integration Tests]
                    end
                    
                    subgraph CD [Fase CD - Deploy Seguro]
                        H --> I[Container Scan\nTrivy/Clair]
                        I --> J[SBOM Generation\nSyft/SPDX]
                        J --> K[Deploy Staging]
                        K --> L[DAST\nOWASP ZAP]
                        L --> M[Manual Approval]
                    end
                    
                    subgraph Runtime [Monitoramento Contínuo]
                        M --> N[Deploy Prod\nCanary/Blue-Green]
                        N --> O[Runtime Protection\nFalco/Aqua]
                        O --> P[Monitoring\nPrometheus/Datadog]
                    end
                    
                    style A fill:#4CAF50,color:white
                    style CI fill:#2196F3,color:white
                    style CD fill:#FF9800,color:black
                    style Runtime fill:#F44336,color:white
            </div>
        </div>

        <div style="margin-top: 30px; text-align: center;">
            <p><strong>Tecnologias utilizadas:</strong> Mermaid.js | Font Awesome | HTML5</p>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            },
            fontFamily: 'Segoe UI, Tahoma, Geneva, Verdana, sans-serif'
        });
    </script>
</body>
</html>